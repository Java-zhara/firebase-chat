{"version":3,"sources":["utils/consts.js","components/Navbar.js","components/Login.js","components/Loader.js","routes.js","components/Chat.js","components/AppRouter.js","App.js","index.js"],"names":["LOGIN_ROUTE","CHAT_ROUTE","Navbar","auth","useContext","Context","useAuthState","user","AppBar","color","position","Toolbar","variant","Grid","container","justify","Button","onClick","signOut","to","Login","login","a","provider","firebase","GoogleAuthProvider","signInWithPopup","console","log","Container","style","height","window","innerHeight","alignItems","width","background","direction","Box","p","Loader","className","publicRoutes","path","Component","privateRoutes","firestore","useState","value","setValue","useCollectionData","collection","orderBy","messages","loading","sendMessage","add","uid","displayName","photoURL","text","createdAt","FieldValue","serverTimestamp","marginTop","border","overflowY","map","message","margin","marginLeft","padding","Avatar","src","TextField","fullWidth","rowsMax","onChange","e","target","AppRouter","component","exact","App","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","createContext","ReactDOM","render","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.1b69b9dc.chunk.js","sourcesContent":["export const LOGIN_ROUTE = '/login'\nexport const CHAT_ROUTE = '/chat'\n","import React, {useContext} from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport {Button, Grid} from '@material-ui/core'\nimport {NavLink} from 'react-router-dom'\nimport {LOGIN_ROUTE} from '../utils/consts'\nimport {Context} from '../index'\nimport {useAuthState} from 'react-firebase-hooks/auth'\n\nconst Navbar = () => {\n  const {auth} = useContext(Context)\n  const [user] = useAuthState(auth)\n\n  return (\n    <AppBar color={'primary'} position=\"static\">\n      <Toolbar variant={'dense'}>\n        <Grid container justify={'flex-end'}>\n          {user ? (\n            <Button onClick={() => auth.signOut()} variant={'outlined'}>\n              Выйти\n            </Button>\n          ) : (\n            <NavLink to={LOGIN_ROUTE}>\n              <Button variant={'outlined'}>Логин</Button>\n            </NavLink>\n          )}\n        </Grid>\n      </Toolbar>\n    </AppBar>\n  )\n}\n\nexport default Navbar\n","import React, {useContext} from 'react'\nimport {Button, Container, Grid} from '@material-ui/core'\nimport Box from '@material-ui/core/Box'\nimport {Context} from '../index'\nimport firebase from 'firebase'\n\nconst Login = () => {\n  const {auth} = useContext(Context)\n\n  const login = async () => {\n    const provider = new firebase.auth.GoogleAuthProvider()\n    const {user} = await auth.signInWithPopup(provider)\n    console.log(user)\n  }\n\n  return (\n    <Container>\n      <Grid\n        container\n        style={{height: window.innerHeight - 50}}\n        alignItems={'center'}\n        justify={'center'}\n      >\n        <Grid\n          style={{width: 400, background: 'lightgray'}}\n          container\n          alignItems={'center'}\n          direction={'column'}\n        >\n          <Box p={5}>\n            <Button onClick={login} variant={'outlined'}>\n              Войти с помощью Google\n            </Button>\n          </Box>\n        </Grid>\n      </Grid>\n    </Container>\n  )\n}\n\nexport default Login\n","import React from 'react'\nimport {Container, Grid} from '@material-ui/core'\n\nconst Loader = () => {\n  return (\n    <Container>\n      <Grid\n        container\n        style={{height: window.innerHeight - 50}}\n        alignItems={'center'}\n        justify={'center'}\n      >\n        <Grid container alignItems={'center'} direction={'column'}>\n          <div className=\"lds-hourglass\"></div>\n        </Grid>\n      </Grid>\n    </Container>\n  )\n}\n\nexport default Loader\n","import {CHAT_ROUTE, LOGIN_ROUTE} from './utils/consts'\nimport Login from './components/Login'\nimport Chat from './components/Chat'\n\nexport const publicRoutes = [\n  {\n    path: LOGIN_ROUTE,\n    Component: Login,\n  },\n]\n\nexport const privateRoutes = [\n  {\n    path: CHAT_ROUTE,\n    Component: Chat,\n  },\n]\n","import React, {useContext, useState} from 'react'\nimport {Context} from '../index'\nimport {useAuthState} from 'react-firebase-hooks/auth'\nimport {Avatar, Button, Container, Grid} from '@material-ui/core'\nimport TextField from '@material-ui/core/TextField'\nimport {useCollectionData} from 'react-firebase-hooks/firestore'\nimport Loader from './Loader'\nimport firebase from 'firebase'\n\nconst Chat = () => {\n  const {auth, firestore} = useContext(Context)\n  const [user] = useAuthState(auth)\n  const [value, setValue] = useState('')\n  const [messages, loading] = useCollectionData(\n    firestore.collection('messages').orderBy('createdAt')\n  )\n\n  const sendMessage = async () => {\n    firestore.collection('messages').add({\n      uid: user.uid,\n      displayName: user.displayName,\n      photoURL: user.photoURL,\n      text: value,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n    })\n    setValue('')\n  }\n\n  if (loading) {\n    return <Loader />\n  }\n\n  return (\n    <Container>\n      <Grid\n        container\n        justify={'center'}\n        style={{height: window.innerHeight - 50, marginTop: 20}}\n      >\n        <div\n          style={{\n            width: '80%',\n            height: '60vh',\n            border: '1px solid gray',\n            overflowY: 'auto',\n          }}\n        >\n          {messages.map((message) => (\n            <div\n              style={{\n                margin: 10,\n                border:\n                  user.uid === message.uid\n                    ? '2px solid green'\n                    : '2px dashed red',\n                marginLeft: user.uid === message.uid ? 'auto' : '10px',\n                width: 'fit-content',\n                padding: 5,\n              }}\n            >\n              <Grid container>\n                <Avatar src={message.photoURL} />\n                <div>{message.displayName}</div>\n              </Grid>\n              <div>{message.text}</div>\n            </div>\n          ))}\n        </div>\n        <Grid\n          container\n          direction={'column'}\n          alignItems={'flex-end'}\n          style={{width: '80%'}}\n        >\n          <TextField\n            fullWidth\n            rowsMax={2}\n            variant={'outlined'}\n            value={value}\n            onChange={(e) => setValue(e.target.value)}\n          />\n          <Button onClick={sendMessage} variant={'outlined'}>\n            Отправить\n          </Button>\n        </Grid>\n      </Grid>\n    </Container>\n  )\n}\n\nexport default Chat\n","import React, {useContext} from 'react'\nimport {Route, Switch, Redirect} from 'react-router-dom'\nimport {privateRoutes, publicRoutes} from '../routes'\nimport {CHAT_ROUTE, LOGIN_ROUTE} from '../utils/consts'\nimport {useAuthState} from 'react-firebase-hooks/auth'\nimport {Context} from '../index'\n\nconst AppRouter = () => {\n  const {auth} = useContext(Context)\n  const [user] = useAuthState(auth)\n\n  return user ? (\n    <Switch>\n      {privateRoutes.map(({path, Component}) => (\n        <Route key={path} path={path} component={Component} exact={true} />\n      ))}\n      <Redirect to={CHAT_ROUTE} />\n    </Switch>\n  ) : (\n    <Switch>\n      {publicRoutes.map(({path, Component}) => (\n        <Route key={path} path={path} component={Component} exact={true} />\n      ))}\n      <Redirect to={LOGIN_ROUTE} />\n    </Switch>\n  )\n}\n\nexport default AppRouter\n","import React, {useContext} from 'react'\nimport {BrowserRouter} from 'react-router-dom'\nimport Navbar from './components/Navbar'\nimport AppRouter from './components/AppRouter'\nimport './App.css'\nimport {Context} from './index'\nimport {useAuthState} from 'react-firebase-hooks/auth'\nimport Loader from './components/Loader'\n\nconst App = () => {\n  const {auth} = useContext(Context)\n  const [\n    // user,\n    loading,\n    // error\n  ] = useAuthState(auth)\n\n  if (loading) {\n    return <Loader />\n  }\n\n  return (\n    <BrowserRouter>\n      <Navbar />\n      <AppRouter />\n    </BrowserRouter>\n  )\n}\n\nexport default App\n","import React, {createContext} from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport firebase from 'firebase'\nimport 'firebase/firestore'\nimport 'firebase/auth'\n\nfirebase.initializeApp({\n  apiKey: 'AIzaSyAkfTQbHOSa3lNq7IaHQ5BdUmxukuCCXXY',\n  authDomain: 'chat-react-6858d.firebaseapp.com',\n  projectId: 'chat-react-6858d',\n  storageBucket: 'chat-react-6858d.appspot.com',\n  messagingSenderId: '620020464138',\n  appId: '1:620020464138:web:a73210dc611902c387bdf3',\n  measurementId: 'G-LKEVGF0Y7E',\n})\n\nexport const Context = createContext(null)\n\nconst auth = firebase.auth()\nconst firestore = firebase.firestore()\n\nReactDOM.render(\n  <Context.Provider\n    value={{\n      firebase,\n      auth,\n      firestore,\n    }}\n  >\n    <App />\n  </Context.Provider>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}